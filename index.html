<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">
<html lang="es">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=320">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <title>Cuadrícula de Colores Retro</title>
    
    <style type="text/css">
        body {
            font-family: Arial, Helvetica, sans-serif;
            text-align: center;
            background: #f0f0f0;
            margin: 15px;
            font-size: 14px;
        }
        h1 {
            font-size: 18px;
            margin-bottom: 10px;
        }
        #controles {
            margin: 20px auto;
            padding: 10px;
            background: #ddd;
            border: 2px solid #333;
            width: 280px;
        }
        label {
            display: inline-block;
            width: 30px;
            text-align: left;
        }
        input[type="text"] {
            width: 50px;
            text-align: center;
        }
        #preview {
            width: 60px;
            height: 60px;
            border: 3px solid #333;
            background: white;
            display: inline-block;
            vertical-align: middle;
            margin-left: 15px;
        }
        #grid {
            width: 240px;
            height: 240px;
            margin: 20px auto;
            border: 3px solid #333;
            background: #fff;
        }
        .row {
            clear: both;
        }
        .cube {
            width: 8px;
            height: 8px;
            margin: 0px;
            background: white;
            float: left;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>Elige un color y pinta los cubos</h1>
    
    <div id="controles">
        <div>
            <label for="r">R:</label>
            <input type="text" id="r" value="0" size="3" maxlength="3">
            
            <label for="g">G:</label>
            <input type="text" id="g" value="0" size="3" maxlength="3">
            
            <label for="b">B:</label>
            <input type="text" id="b" value="255" size="3" maxlength="3">
            
            <div id="preview"></div>
        </div>
    </div>
    
    <div id="grid">
        <!-- 4 filas x 4 cubos -->
        <div class="row">
            <div class="cube" onclick="pintar(this)"></div>
            <div class="cube" onclick="pintar(this)"></div>
            <div class="cube" onclick="pintar(this)"></div>
            <div class="cube" onclick="pintar(this)"></div>
        </div>
        <div class="row">
            <div class="cube" onclick="pintar(this)"></div>
            <div class="cube" onclick="pintar(this)"></div>
            <div class="cube" onclick="pintar(this)"></div>
            <div class="cube" onclick="pintar(this)"></div>
        </div>
        <div class="row">
            <div class="cube" onclick="pintar(this)"></div>
            <div class="cube" onclick="pintar(this)"></div>
            <div class="cube" onclick="pintar(this)"></div>
            <div class="cube" onclick="pintar(this)"></div>
        </div>
        <div class="row">
            <div class="cube" onclick="pintar(this)"></div>
            <div class="cube" onclick="pintar(this)"></div>
            <div class="cube" onclick="pintar(this)"></div>
            <div class="cube" onclick="pintar(this)"></div>
        </div>
    </div>
    
    <p align="center">1.0.0</p>

    <script type="text/javascript">
        // Función para validar y limitar valores entre 0-255
        function validar(valor) {
            var n = parseInt(valor);
            if (isNaN(n)) return 0;
            if (n < 0) return 0;
            if (n > 255) return 255;
            return n;
        }
        
        // Actualiza el color del previsualizador
        function actualizarPreview() {
            var r = validar(document.getElementById('r').value);
            var g = validar(document.getElementById('g').value);
            var b = validar(document.getElementById('b').value);
            
            // Corrige los valores en los campos
            document.getElementById('r').value = r;
            document.getElementById('g').value = g;
            document.getElementById('b').value = b;
            
            // Aplica al cubo previsualizador
            document.getElementById('preview').style.backgroundColor = 
                'rgb(' + r + ',' + g + ',' + b + ')';
        }
        
        // Pinta el cubo clicado con el color actual
        function pintar(cubo) {
            var r = validar(document.getElementById('r').value);
            var g = validar(document.getElementById('g').value);
            var b = validar(document.getElementById('b').value);
            
            cubo.style.backgroundColor = 'rgb(' + r + ',' + g + ',' + b + ')';
        }
        
        // Eventos mejorados para actualización casi instantánea del preview
        var campos = ['r', 'g', 'b'];
        for (var i = 0; i < campos.length; i++) {
            var campo = document.getElementById(campos[i]);
            campo.onkeyup = actualizarPreview;   // Al soltar tecla
            campo.onchange = actualizarPreview;  // Al salir del campo o cambiar valor
            campo.oninput = actualizarPreview;   // En cada cambio (más fluido)
        }
        
        // Inicializa el preview al cargar la página
        actualizarPreview();
    </script>
</body>
</html>
